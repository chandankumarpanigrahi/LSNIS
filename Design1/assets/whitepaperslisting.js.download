jQuery(function($){function fetchWhitePapers(paged=1){var searchValue=$('#search-input').val();$.ajax({url:wpaper_custom_ajax_obj.ajax_url,type:'GET',data:{action:'search_whitepapers',s:searchValue,post_type:'white_paper',paged:paged},success:function(response){$('#search-results').html(response);$('.main-listing, .main-pagination, .selected-container').hide();$('.whitepapers-sp .pagination-list a').on('click',function(e){e.preventDefault();var paged=$(this).attr('href').split('paged=')[1];fetchWhitePapers(paged)});jQuery('html, body').animate({scrollTop:jQuery('#search-results').offset().top},500)},error:function(xhr,status,error){console.error(status+': '+error)}})}
$('.whitepapersearch').on('submit',function(e){$('#filtered-stories').css({'display':'none'});$('#search-results').css({'display':'block'});e.preventDefault();fetchWhitePapers()});$('.whitepapers-sp .pagination-list a').on('click',function(e){e.preventDefault();var href=$(this).attr('href');var paged=href.match(/paged=([0-9]+)/);paged=paged?paged[1]:1;fetchWhitePapers(paged)})});jQuery(function($){jQuery(document).on('click','.whitepapers-fp .pagination-list a',function(e){e.preventDefault();var paged=jQuery(this).attr('href').split('paged=')[1];fetchFilteredWhitePapers(paged)});function fetchFilteredWhitePapers(paged=1){var maincat1=$('#taxonomyname1').val();var maincat2=$('#taxonomyname2').val();var maincat3=$('#taxonomyname3').val();var taxonomy_product_whitepaper=$('input[name="taxonomy1[]"]:checked').map(function(){return $(this).val()}).get();var taxonomy_solution_whitepaper=$('input[name="taxonomy2[]"]:checked').map(function(){return $(this).val()}).get();var taxonomy_industry_whitepaper=$('input[name="taxonomy3[]"]:checked').map(function(){return $(this).val()}).get();jQuery.ajax({url:wpaper_custom_ajax_obj.ajax_url,type:'POST',data:{action:'filter_whitepapers',taxonomy1:taxonomy_product_whitepaper,taxonomy2:taxonomy_solution_whitepaper,taxonomy3:taxonomy_industry_whitepaper,maintax1:maincat1,maintax2:maincat2,maintax3:maincat3,paged:paged,},success:function(response){jQuery('.loader').css('display','none');jQuery('#filtered-stories').html(response);jQuery('.main-listing').css({'display':'none'});jQuery('.main-pagination').css({'display':'none'});$('.whitepapers-fp .pagination-list a').on('click',function(e){e.preventDefault();var paged=$(this).attr('href').split('paged=')[1];fetchFilteredWhitePapers(paged)});jQuery('html, body').animate({scrollTop:jQuery('#filtered-stories').offset().top},500)},})}
$('.whitepaper-item').on('click',function(){$(this).find('input[type="checkbox"]').each(function(){$(this).prop('checked',!$(this).prop('checked'))});$(this).find('input[type="checkbox"]').trigger('change')});$('.whitepaper-item').on('change','.checkcategory',function(){$('#search-results').css('display','none');$('#filtered-stories').css('display','block');$('.loader').css('display','block');fetchFilteredWhitePapers(1)})});jQuery(document).ready(function($){$('body').on('click','.whitepaper-item',function(){$(this).find('input[type="checkbox"]').each(function(){let checkbox=$(this);let dataName=checkbox.attr('data-name');console.log(dataName);waitForElementToExist('#selected-stories',function(){if($('#selected-stories').find('p[data-name="'+dataName+'"]').length===0){$('#selected-stories').append('<p data-name="'+dataName+'">'+' <span class="remove" style="cursor:pointer;color:#414145!important;border:1px solid #  414145!important;border-radius:50%;padding:0px 4px;margin-right:5px;">&times;</span>'+dataName+'</p>')}else{$('#selected-stories').find('p[data-name="'+dataName+'"]').remove()}})})});$('body').on('click','#selected-stories .remove',function(){let dataName=$(this).parent('p').attr('data-name');$(this).parent('p').remove();$('.whitepaper-item').each(function(){let checkbox=$(this).find('input[type="checkbox"][data-name="'+dataName+'"]');if(checkbox.length){checkbox.prop('checked',!1);checkbox.trigger('change');let nearestLi=checkbox.closest('li');nearestLi.addClass('unchecked');nearestLi.trigger('customUncheck');$(this).find('span[data-name="'+dataName+'"]').remove()}})});function waitForElementToExist(selector,callback){if($(selector).length){callback()}else{setTimeout(function(){waitForElementToExist(selector,callback)},100)}}
document.addEventListener('DOMContentLoaded',function(){var dropdown=document.querySelector('.dropdown');if(dropdown){dropdown.addEventListener('click',function(){document.querySelector('.selected-container').style.zIndex='9';this.style.zIndex='1'})}else{console.error('Element with class .dropdown not found.')}})})