jQuery(function($){function fetchCustomerStories(paged=1){var searchValue=$('#search-input').val();$.ajax({url:cs_custom_ajax_obj.ajax_url,type:'GET',data:{action:'search_customerstories',s:searchValue,post_type:'customer_stories',paged:paged},success:function(response){$('#search-results').html(response);$('.main-listing, .main-pagination, .selected-container').hide();$('.stories-sp .pagination-list a').on('click',function(e){e.preventDefault();var paged=$(this).attr('href').split('paged=')[1];fetchCustomerStories(paged)});jQuery('html, body').animate({scrollTop:jQuery('#search-results').offset().top},500)},error:function(xhr,status,error){console.error(status+': '+error)}})}
$('.customersearch').on('submit',function(e){$('#filtered-stories').css({'display':'none'});$('#search-results').css({'display':'block'});e.preventDefault();fetchCustomerStories()});$('.stories-sp .pagination-list a').on('click',function(e){e.preventDefault();var href=$(this).attr('href');var paged=href.match(/paged=([0-9]+)/);paged=paged?paged[1]:1;fetchCustomerStories(paged)})});jQuery(function($){jQuery(document).on('click','.stories-fp .pagination-list a',function(e){e.preventDefault();var paged=jQuery(this).attr('href').split('paged=')[1];fetchFilteredStories(paged)});function fetchFilteredStories(paged=1){var maincat1=jQuery('#taxonomyname1').val();var maincat2=jQuery('#taxonomyname2').val();var maincat3=jQuery('#taxonomyname3').val();var maincat4=jQuery('#taxonomyname4').val();var taxonomy_product_story=jQuery('input[name="taxonomy1[]"]:checked').map(function(){return jQuery(this).val()}).get();var taxonomy_solution_story=jQuery('input[name="taxonomy2[]"]:checked').map(function(){return jQuery(this).val()}).get();var taxonomy_industry_story=jQuery('input[name="taxonomy3[]"]:checked').map(function(){return jQuery(this).val()}).get();var taxonomy_locations_story=jQuery('input[name="taxonomy4[]"]:checked').map(function(){return jQuery(this).val()}).get();jQuery.ajax({url:cs_custom_ajax_obj.ajax_url,type:'POST',data:{action:'filter_customer_stories',taxonomy1:taxonomy_product_story,taxonomy2:taxonomy_solution_story,taxonomy3:taxonomy_industry_story,taxonomy4:taxonomy_locations_story,maintax1:maincat1,maintax2:maincat2,maintax3:maincat3,maintax4:maincat4,paged:paged,},success:function(response){jQuery('.loader').css('display','none');jQuery('#filtered-stories').html(response);jQuery('.main-listing').css({'display':'none'});jQuery('.main-pagination').css({'display':'none'});$('.stories-fp .pagination-list a').on('click',function(e){e.preventDefault();var paged=$(this).attr('href').split('paged=')[1];fetchFilteredStories(paged)});jQuery('html, body').animate({scrollTop:jQuery('#filtered-stories').offset().top},500)},})}
$('.customer-item').on('click',function(){$(this).find('input[type="checkbox"]').each(function(){$(this).prop('checked',!$(this).prop('checked'))});$(this).find('input[type="checkbox"]').trigger('change')});$('.customer-item').on('change','.checkcategory',function(){$('#search-results').css('display','none');$('#filtered-stories').css('display','block');$('.loader').css('display','block');fetchFilteredStories(1)})});jQuery(document).ready(function($){$('body').on('click','.customer-item',function(){$(this).find('input[type="checkbox"]').each(function(){let checkbox=$(this);let dataName=checkbox.attr('data-name');console.log(dataName);waitForElementToExist('#selected-stories',function(){if($('#selected-stories').find('p[data-name="'+dataName+'"]').length===0){$('#selected-stories').append('<p data-name="'+dataName+'">'+' <span class="remove" style="cursor:pointer;color:#414145!important;border:1px solid #  414145!important;border-radius:50%;padding:0px 4px;margin-right:5px;">&times;</span>'+dataName+'</p>')}else{$('#selected-stories').find('p[data-name="'+dataName+'"]').remove()}})})});$('body').on('click','#selected-stories .remove',function(){let dataName=$(this).parent('p').attr('data-name');$(this).parent('p').remove();$('.customer-item').each(function(){let checkbox=$(this).find('input[type="checkbox"][data-name="'+dataName+'"]');if(checkbox.length){checkbox.prop('checked',!1);checkbox.trigger('change');let nearestLi=checkbox.closest('li');nearestLi.addClass('unchecked');nearestLi.trigger('customUncheck');$(this).find('span[data-name="'+dataName+'"]').remove()}})});function waitForElementToExist(selector,callback){if($(selector).length){callback()}else{setTimeout(function(){waitForElementToExist(selector,callback)},100)}}
document.addEventListener('DOMContentLoaded',function(){var dropdown=document.querySelector('.dropdown');if(dropdown){dropdown.addEventListener('click',function(){document.querySelector('.selected-container').style.zIndex='9';this.style.zIndex='1'})}else{console.error('Element with class .dropdown not found.')}})});document.addEventListener('DOMContentLoaded',function(){document.addEventListener('wpcf7invalid',function(event){const errorTips=document.querySelectorAll('.wpcf7-not-valid-tip');errorTips.forEach(function(errorTip){const inputField=errorTip.previousElementSibling;if(inputField&&(inputField.tagName==='INPUT'||inputField.tagName==='TEXTAREA'||inputField.tagName==='SELECT')){inputField.style.border='#b82622!important'}})})});const inputs=document.querySelectorAll('.input-field');const labels=document.querySelectorAll('.input-label');inputs.forEach((input,index)=>{const label=labels[index];const placeholderText=input.getAttribute('placeholder');input.addEventListener('focus',function(){label.style.display='block';input.removeAttribute('placeholder')});input.addEventListener('blur',function(){if(input.value===''){label.style.display='none';input.setAttribute('placeholder',placeholderText)}})});document.addEventListener('DOMContentLoaded',function(){const popupOverlay=document.querySelector('.popup-overlay');const observer=new MutationObserver(function(mutations){mutations.forEach(function(mutation){if(getComputedStyle(popupOverlay).display==='flex'){document.documentElement.style.overflow='hidden';document.body.style.overflow='hidden'}else{document.documentElement.style.overflow='';document.body.style.overflow=''}})});observer.observe(popupOverlay,{attributes:!0,attributeFilter:['style']})});document.querySelector('#demo-popup').addEventListener('click',function(){const event=new Event('open-popup-event');document.dispatchEvent(event)})