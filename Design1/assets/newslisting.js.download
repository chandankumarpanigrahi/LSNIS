jQuery(function($){function fetchNews(paged=1){var searchValue=$('#search-input').val();$.ajax({url:news_custom_ajax_obj.ajax_url,type:'GET',data:{action:'search_news',s:searchValue,post_type:'news',paged:paged},success:function(response){$('#search-results').html(response);$('.main-listing, .main-pagination, .selected-container').hide();$('.news-sp .pagination-list a').on('click',function(e){e.preventDefault();var paged=$(this).attr('href').split('paged=')[1];fetchNews(paged)});jQuery('html, body').animate({scrollTop:jQuery('#search-results').offset().top},500)},error:function(xhr,status,error){console.error(status+': '+error)}})}
$('.newssearch').on('submit',function(e){$('#filtered-stories').css({'display':'none'});$('#search-results').css({'display':'block'});e.preventDefault();fetchNews()});$('.news-sp .pagination-list a').on('click',function(e){e.preventDefault();var href=$(this).attr('href');var paged=href.match(/paged=([0-9]+)/);paged=paged?paged[1]:1;fetchNews(paged)})});jQuery(function($){jQuery(document).on('click','.news-fp .pagination-list a',function(e){e.preventDefault();var paged=jQuery(this).attr('href').split('paged=')[1];fetchFilteredNews(paged)});function fetchFilteredNews(paged=1){var news_year=$('input[name="year1[]"]:checked').map(function(){return $(this).val()}).get();var maincat1=$('#taxonomyname1').val();var taxonomy_newslocation=$('input[name="taxonomy1[]"]:checked').map(function(){return $(this).val()}).get();jQuery.ajax({url:news_custom_ajax_obj.ajax_url,type:'POST',data:{action:'filter_news',newsyear:news_year,taxonomy1:taxonomy_newslocation,maintax1:maincat1,paged:paged,},success:function(response){jQuery('.loader').css('display','none');jQuery('#filtered-stories').html(response);jQuery('.main-listing').css({'display':'none'});jQuery('.main-pagination').css({'display':'none'});$('.news-fp .pagination-list a').on('click',function(e){e.preventDefault();var paged=$(this).attr('href').split('paged=')[1];fetchNews(paged)});jQuery('html, body').animate({scrollTop:jQuery('#filtered-stories').offset().top},500)},})}
$('.news-item').on('click',function(){$(this).find('input[type="checkbox"]').each(function(){$(this).prop('checked',!$(this).prop('checked'))});$(this).find('input[type="checkbox"]').trigger('change')});$('.news-item').on('change','.checkcategory',function(){$('#search-results').css('display','none');$('#filtered-stories').css('display','block');$('.loader').css('display','block');fetchFilteredNews(1)})});jQuery(document).ready(function($){$('body').on('click','.news-item',function(){$(this).find('input[type="checkbox"]').each(function(){let checkbox=$(this);let dataName=checkbox.attr('data-name');console.log(dataName);waitForElementToExist('#selected-stories',function(){if($('#selected-stories').find('p[data-name="'+dataName+'"]').length===0){$('#selected-stories').append('<p data-name="'+dataName+'">'+' <span class="remove" style="cursor:pointer;color:#414145!important;border:1px solid #  414145!important;border-radius:50%;padding:0px 4px;margin-right:5px;">&times;</span>'+dataName+'</p>')}else{$('#selected-stories').find('p[data-name="'+dataName+'"]').remove()}})})});$('body').on('click','#selected-stories .remove',function(){let dataName=$(this).parent('p').attr('data-name');$(this).parent('p').remove();$('.news-item').each(function(){let checkbox=$(this).find('input[type="checkbox"][data-name="'+dataName+'"]');if(checkbox.length){checkbox.prop('checked',!1);checkbox.trigger('change');let nearestLi=checkbox.closest('li');nearestLi.addClass('unchecked');nearestLi.trigger('customUncheck');$(this).find('span[data-name="'+dataName+'"]').remove()}})});function waitForElementToExist(selector,callback){if($(selector).length){callback()}else{setTimeout(function(){waitForElementToExist(selector,callback)},100)}}
document.addEventListener('DOMContentLoaded',function(){var dropdown=document.querySelector('.dropdown');if(dropdown){dropdown.addEventListener('click',function(){document.querySelector('.selected-container').style.zIndex='9';this.style.zIndex='1'})}else{console.error('Element with class .dropdown not found.')}})});$(window).on('scroll',function(){var $section=$('footer');var $filterDiv=$('.latest-blog-filter-sec');if($section.length){var sectionTop=$section.offset().top;var sectionBottom=sectionTop+$section.outerHeight();var viewportTop=$(window).scrollTop();var viewportBottom=viewportTop;if(sectionBottom>viewportTop&&sectionTop<viewportBottom){$filterDiv.css('position','unset')}else{$filterDiv.css('position','sticky')}}})